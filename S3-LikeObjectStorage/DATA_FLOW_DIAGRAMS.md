# ğŸ“Š DATA FLOW DIAGRAMS - S3-like Object Storage System

## ğŸ—ï¸ **SYSTEM ARCHITECTURE OVERVIEW**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser   â”‚â”€â”€â”€â”€â”‚ Demo UI Server  â”‚â”€â”€â”€â”€â”‚   Docker Network    â”‚
â”‚  (UI App)   â”‚    â”‚ (Port 8080)     â”‚    â”‚   (s3-network)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                             â”‚                                             â”‚
        â–¼                                             â–¼                                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚API Gateway  â”‚                              â”‚   Storage   â”‚                              â”‚   Identity  â”‚
â”‚Port: 7841   â”‚                              â”‚   Layer     â”‚                              â”‚Port: 7851   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                             â”‚                                             â”‚
        â”œâ”€â”€â”€ Rate Limiting                           â”œâ”€â”€â”€ PostgreSQL (Metadata)                   â”œâ”€â”€â”€ SQLite
        â”œâ”€â”€â”€ Authentication                          â”œâ”€â”€â”€ SQLite (Storage Index)                  â”œâ”€â”€â”€ User Management
        â””â”€â”€â”€ Request Routing                         â””â”€â”€â”€ File System (/data/storage)             â””â”€â”€â”€ Auth Tokens

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Bucket    â”‚    â”‚   Object    â”‚    â”‚   Storage   â”‚    â”‚  Metadata   â”‚
â”‚Port: 7861   â”‚    â”‚Port: 7871   â”‚    â”‚Port: 7881   â”‚    â”‚Port: 7891   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 1ï¸âƒ£ **BUCKET OPERATIONS**

### **Create Bucket**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  POST   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  Auth   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  CREATE  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     UI      â”‚ buckets â”‚ API Gateway â”‚ verify  â”‚   Bucket    â”‚  bucket  â”‚ PostgreSQL   â”‚
â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   Service   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   Database   â”‚
â”‚ Bucket Form â”‚         â”‚ Rate Limit  â”‚         â”‚             â”‚          â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ + Routing   â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚                        â”‚
                                                       â”‚  âœ… Success            â”‚  
                                                       â–¼                        â–¼  
                                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                              â”‚   Response  â”‚            â”‚   Stored:   â”‚
                                              â”‚   201 + ID  â”‚            â”‚ bucket_id,  â”‚
                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚ name, owner â”‚
                                                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **List Buckets** 
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   GET    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  Auth   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  SELECT  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     UI      â”‚  buckets â”‚ API Gateway â”‚ verify  â”‚   Bucket    â”‚   WHERE  â”‚ PostgreSQL   â”‚
â”‚             â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”‚             â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”‚   Service   â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚   Database   â”‚
â”‚ Bucket List â”‚         â”‚ Rate Limit  â”‚         â”‚             â”‚ owner_id â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ + Routing   â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â–²                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚                        â–²
       â”‚                                               â”‚                        â”‚
       â”‚                                               â–¼                        â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ JSON Array â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
         [{bucket_id, name, owner, created}]    â”‚   Format    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â”‚   Response  â”‚   
                                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   
```

### **Delete Bucket**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” DELETE  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  Auth   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  DELETE  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     UI      â”‚ bucket/ â”‚ API Gateway â”‚ verify  â”‚   Bucket    â”‚   WHERE  â”‚ PostgreSQL   â”‚
â”‚             â”‚ {name}  â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   Service   â”‚  bucket  â”‚   Database   â”‚
â”‚Delete Buttonâ”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ Rate Limit  â”‚         â”‚             â”‚ = name   â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ + Routing   â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚                        â”‚
                                                       â”‚  âœ… 204 Success        â”‚
                                                       â–¼                        â–¼
                                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                              â”‚   Empty     â”‚            â”‚   Record    â”‚
                                              â”‚  Response   â”‚            â”‚   Removed   â”‚
                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2ï¸âƒ£ **OBJECT OPERATIONS**

### **Upload Object (Most Complex - Storage First Pattern)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   PUT    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  Auth   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          
â”‚     UI      â”‚ buckets/ â”‚ API Gateway â”‚ verify  â”‚   Object    â”‚          
â”‚             â”‚{bucket}/ â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   Service   â”‚          
â”‚File Upload  â”‚objects/  â”‚ Rate Limit  â”‚         â”‚             â”‚          
â”‚   Form      â”‚{key}     â”‚ + Routing   â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚                 
                                                        â”‚                 
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                    STEP 1: Storage First      â–¼                         â”‚
        â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   POST    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   File    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
        â”‚         â”‚   Object    â”‚   /data   â”‚   Storage   â”‚  System   â”‚   UUID    â”‚â”‚
        â”‚         â”‚   Service   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   Service   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ Partition â”‚â”‚
        â”‚         â”‚             â”‚ + UUID    â”‚             â”‚  3-Copy   â”‚  Storage  â”‚â”‚
        â”‚         â”‚             â”‚ + MD5     â”‚             â”‚   Write   â”‚           â”‚â”‚
        â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
        â”‚                    â–²                      â”‚                              â”‚
        â”‚                    â”‚                      â–¼                              â”‚
        â”‚                    â”‚                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
        â”‚                    â”‚                â”‚  SQLite   â”‚                       â”‚
        â”‚                    â”‚                â”‚  Storage  â”‚                       â”‚
        â”‚                    â”‚                â”‚   Index   â”‚                       â”‚
        â”‚                    â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
        â”‚                    â”‚                                                    â”‚
        â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ âœ… 201 Success â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚         â”‚                                                              
        â”‚         â–¼                    STEP 2: Metadata Second                   
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   POST    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   INSERT   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” 
        â”‚  â”‚   Object    â”‚metadata/  â”‚  Metadata   â”‚    INTO    â”‚ PostgreSQL   â”‚ 
        â”‚  â”‚   Service   â”‚  objects  â”‚   Service   â”‚   object_  â”‚   Database   â”‚ 
        â”‚  â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚             â”‚  metadata  â”‚              â”‚ 
        â”‚  â”‚             â”‚ + bucket  â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚              â”‚ 
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ + object  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ 
        â”‚         â”‚       + metadata                                            
        â”‚         â”‚                                                             
        â”‚         â–¼                                                             
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           
        â”‚  â”‚ âœ… SUCCESS  â”‚           â”‚âŒ ROLLBACK  â”‚ â—€â”€â”€ If metadata fails     
        â”‚  â”‚   Return    â”‚           â”‚   DELETE    â”‚     delete from storage   
        â”‚  â”‚  Object ID  â”‚           â”‚   Storage   â”‚                           
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Download Object**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   GET    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  Auth   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    
â”‚     UI      â”‚ buckets/ â”‚ API Gateway â”‚ verify  â”‚   Object    â”‚                    
â”‚             â”‚{bucket}/ â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   Service   â”‚                    
â”‚Download Linkâ”‚objects/  â”‚ Rate Limit  â”‚         â”‚             â”‚                    
â”‚             â”‚{key}     â”‚ + Routing   â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚                          
                                                        â”‚                          
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                 STEP 1: Get Object ID         â–¼                          â”‚
        â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   GET     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   SELECT   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
        â”‚         â”‚   Object    â”‚metadata/  â”‚  Metadata   â”‚    WHERE   â”‚PostgreSQL â”‚â”‚
        â”‚         â”‚   Service   â”‚buckets/   â”‚   Service   â”‚   bucket   â”‚ Database  â”‚â”‚
        â”‚         â”‚             â”‚{bucket}/  â”‚             â”‚   & name   â”‚           â”‚â”‚
        â”‚         â”‚             â”‚objects    â”‚             â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚           â”‚â”‚
        â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
        â”‚                â–²                           â”‚                              â”‚
        â”‚                â”‚                           â–¼                              â”‚
        â”‚                â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
        â”‚                â”‚                  â”‚   Object    â”‚                        â”‚
        â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚Metadata +ID â”‚                        â”‚
        â”‚                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
        â”‚                                                                         â”‚
        â”‚                 STEP 2: Fetch File Data                                 â”‚
        â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   GET     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   Read    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
        â”‚         â”‚   Object    â”‚   data/   â”‚   Storage   â”‚   File    â”‚   UUID    â”‚â”‚
        â”‚         â”‚   Service   â”‚  {uuid}   â”‚   Service   â”‚  System   â”‚ Partition â”‚â”‚
        â”‚         â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Storage  â”‚â”‚
        â”‚         â”‚             â”‚           â”‚             â”‚           â”‚           â”‚â”‚
        â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
        â”‚                â–²                           â”‚                              â”‚
        â”‚                â”‚                           â–¼                              â”‚
        â”‚                â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
        â”‚                â”‚                  â”‚   Binary    â”‚                        â”‚
        â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚File Stream  â”‚                        â”‚
        â”‚                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚ Stream to   â”‚
                          â”‚   Browser   â”‚
                          â”‚ + Headers   â”‚
                          â”‚(ETag, Size) â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Delete Object (Dual Cleanup)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” DELETE  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  Auth   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    
â”‚     UI      â”‚ buckets/ â”‚ API Gateway â”‚ verify  â”‚   Object    â”‚                    
â”‚             â”‚{bucket}/ â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   Service   â”‚                    
â”‚Delete Buttonâ”‚objects/  â”‚ Rate Limit  â”‚         â”‚             â”‚                    
â”‚             â”‚{key}     â”‚ + Routing   â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚                          
                                                        â”‚                          
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                 STEP 1: Get Object ID         â–¼                          â”‚
        â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   GET     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   SELECT   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
        â”‚         â”‚   Object    â”‚metadata/  â”‚  Metadata   â”‚    WHERE   â”‚PostgreSQL â”‚â”‚
        â”‚         â”‚   Service   â”‚buckets/   â”‚   Service   â”‚   bucket   â”‚ Database  â”‚â”‚
        â”‚         â”‚             â”‚{bucket}/  â”‚             â”‚   & name   â”‚           â”‚â”‚
        â”‚         â”‚             â”‚objects    â”‚             â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚           â”‚â”‚
        â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
        â”‚                â”‚                           â”‚                              â”‚
        â”‚                â”‚                           â–¼                              â”‚
        â”‚                â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
        â”‚                â”‚                  â”‚   Object    â”‚                        â”‚
        â”‚                â”‚                  â”‚   ID Found  â”‚                        â”‚
        â”‚                â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
        â”‚                â”‚                                                         â”‚
        â”‚                â–¼           STEP 2: Delete Metadata First                 â”‚
        â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  DELETE   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   DELETE   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
        â”‚         â”‚   Object    â”‚metadata/  â”‚  Metadata   â”‚    FROM    â”‚PostgreSQL â”‚â”‚
        â”‚         â”‚   Service   â”‚ objects/  â”‚   Service   â”‚   object_  â”‚ Database  â”‚â”‚
        â”‚         â”‚             â”‚  {uuid}   â”‚             â”‚  metadata  â”‚           â”‚â”‚
        â”‚         â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚           â”‚â”‚
        â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
        â”‚                â”‚                           â”‚                              â”‚
        â”‚                â”‚                           â–¼                              â”‚
        â”‚                â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
        â”‚                â”‚                  â”‚ âœ… Metadata â”‚                        â”‚
        â”‚                â”‚                  â”‚   Deleted   â”‚                        â”‚
        â”‚                â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
        â”‚                â”‚                                                         â”‚
        â”‚                â–¼           STEP 3: Delete Storage (Cleanup)              â”‚
        â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  DELETE   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   Remove   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
        â”‚         â”‚   Object    â”‚   data/   â”‚   Storage   â”‚  All 3     â”‚   UUID    â”‚â”‚
        â”‚         â”‚   Service   â”‚  {uuid}   â”‚   Service   â”‚   File     â”‚ Partition â”‚â”‚
        â”‚         â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚             â”‚  Copies    â”‚  Storage  â”‚â”‚
        â”‚         â”‚             â”‚           â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚           â”‚â”‚
        â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
        â”‚                â”‚                           â”‚                              â”‚
        â”‚                â”‚                           â–¼                              â”‚
        â”‚                â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
        â”‚                â”‚                  â”‚ âœ… Storage  â”‚                        â”‚
        â”‚                â”‚                  â”‚   Cleaned   â”‚                        â”‚
        â”‚                â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚ Return 204  â”‚
                          â”‚  Success    â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **List Objects (with Prefix Filtering)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   GET    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  Auth   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    
â”‚     UI      â”‚ buckets/ â”‚ API Gateway â”‚ verify  â”‚   Object    â”‚                    
â”‚             â”‚{bucket}/ â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   Service   â”‚                    
â”‚Object List  â”‚objects   â”‚ Rate Limit  â”‚         â”‚             â”‚                    
â”‚ + Prefix    â”‚?prefix=  â”‚ + Routing   â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚                          
                                                        â”‚                          
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                 Query with Filters            â–¼                          â”‚
        â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   GET     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   SELECT   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
        â”‚         â”‚   Object    â”‚metadata/  â”‚  Metadata   â”‚    WHERE   â”‚PostgreSQL â”‚â”‚
        â”‚         â”‚   Service   â”‚buckets/   â”‚   Service   â”‚   bucket   â”‚ Database  â”‚â”‚
        â”‚         â”‚             â”‚{bucket}/  â”‚             â”‚   & prefix â”‚           â”‚â”‚
        â”‚         â”‚             â”‚objects    â”‚             â”‚    LIKE    â”‚           â”‚â”‚
        â”‚         â”‚             â”‚?prefix    â”‚             â”‚  '{prefix}%'â”‚          â”‚â”‚
        â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
        â”‚                â–²                           â”‚                              â”‚
        â”‚                â”‚                           â–¼                              â”‚
        â”‚                â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
        â”‚                â”‚                  â”‚   Object    â”‚                        â”‚
        â”‚                â”‚                  â”‚Metadata Listâ”‚                        â”‚
        â”‚                â”‚                  â”‚ + Paginationâ”‚                        â”‚
        â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚             â”‚                        â”‚
        â”‚                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚ JSON Array  â”‚
                          â”‚[{object_id, â”‚
                          â”‚ name, size, â”‚
                          â”‚ etag, date}]â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3ï¸âƒ£ **ADMINISTRATIVE OPERATIONS**

### **Health Checks**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   GET    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   Basic   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    
â”‚     UI      â”‚  /health â”‚ Each Serviceâ”‚   Status  â”‚   Service   â”‚                    
â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚             â”‚   Check   â”‚   Health    â”‚                    
â”‚Health Buttonâ”‚         â”‚ API Gateway â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   Monitor   â”‚                    
â”‚             â”‚         â”‚Identity,etc.â”‚           â”‚             â”‚                    
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    
                               â”‚                           â”‚                          
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚      PARALLEL HEALTH CHECKS TO ALL SERVICES      â–¼                          â”‚
        â”‚                                                                             â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
        â”‚  â”‚ API Gateway â”‚  â”‚  Identity   â”‚  â”‚   Bucket    â”‚  â”‚   Object    â”‚       â”‚
        â”‚  â”‚   :7841     â”‚  â”‚   :7851     â”‚  â”‚   :7861     â”‚  â”‚   :7871     â”‚       â”‚
        â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚       â”‚
        â”‚  â”‚ âœ… Simple   â”‚  â”‚ âœ… SQLite   â”‚  â”‚ âœ… PostgreSQLâ”‚  â”‚ âœ… Simple   â”‚       â”‚
        â”‚  â”‚   Status    â”‚  â”‚    Test     â”‚  â”‚    Test     â”‚  â”‚   Status    â”‚       â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
        â”‚                                                                             â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚
        â”‚  â”‚   Storage   â”‚  â”‚  Metadata   â”‚                                         â”‚
        â”‚  â”‚   :7881     â”‚  â”‚   :7891     â”‚                                         â”‚
        â”‚  â”‚             â”‚  â”‚             â”‚                                         â”‚
        â”‚  â”‚ âœ… File Sys â”‚  â”‚ âœ… PostgreSQLâ”‚                                        â”‚
        â”‚  â”‚    Test     â”‚  â”‚    Test     â”‚                                         â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚ Aggregate   â”‚
                          â”‚ Status UI   â”‚
                          â”‚ âœ… All OK   â”‚
                          â”‚ âŒ Issues   â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Rate Limiting (API Gateway Middleware)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    ANY    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” Rate Limitâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   
â”‚     UI      â”‚  Request  â”‚ API Gateway â”‚ Middleware â”‚   Memory    â”‚                   
â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶  â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ Rate Store  â”‚                   
â”‚ Any Action  â”‚           â”‚ Intercepts  â”‚ Check IP  â”‚             â”‚                   
â”‚             â”‚           â”‚ All Traffic â”‚           â”‚{IP: [times]}â”‚                   
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   
                                 â”‚                           â”‚                        
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚            RATE LIMIT LOGIC (100 req/min)         â–¼                        â”‚
        â”‚                                                                             â”‚
        â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
        â”‚         â”‚   Check     â”‚           â”‚   Clean     â”‚           â”‚   Count     â”‚â”‚
        â”‚         â”‚   Client    â”‚           â”‚   Old       â”‚           â”‚   Recent    â”‚â”‚
        â”‚         â”‚     IP      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Requests   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Requests   â”‚â”‚
        â”‚         â”‚             â”‚           â”‚ (>60s ago) â”‚           â”‚ (<60s ago)  â”‚â”‚
        â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
        â”‚                                                                    â”‚        â”‚
        â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚        â”‚
        â”‚         â”‚âŒ BLOCK     â”‚           â”‚âœ… ALLOW     â”‚                  â”‚        â”‚
        â”‚         â”‚Return 429   â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚Add timestampâ”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
        â”‚         â”‚Rate Limited â”‚ IF >100   â”‚To list &    â”‚ IF â‰¤100                   â”‚
        â”‚         â”‚             â”‚           â”‚Continue     â”‚                           â”‚
        â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4ï¸âƒ£ **STATISTICS & DATA INTEGRITY OPERATIONS**

### **Storage Statistics**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   GET     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   Query   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   
â”‚     UI      â”‚metadata/  â”‚  Metadata   â”‚Aggregate  â”‚ PostgreSQL  â”‚                   
â”‚             â”‚   stats   â”‚   Service   â”‚    SQL    â”‚  Database   â”‚                   
â”‚Stats Button â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚             â”‚                   
â”‚             â”‚           â”‚             â”‚           â”‚object_meta  â”‚                   
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   
                                 â”‚                           â”‚                        
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚              AGGREGATION QUERIES                   â–¼                        â”‚
        â”‚                                                                             â”‚
        â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
        â”‚         â”‚   Global    â”‚           â”‚ Per-Bucket  â”‚           â”‚  Top 10     â”‚â”‚
        â”‚         â”‚    Stats    â”‚           â”‚   Stats     â”‚           â”‚  Buckets    â”‚â”‚
        â”‚         â”‚             â”‚           â”‚             â”‚           â”‚             â”‚â”‚
        â”‚         â”‚ COUNT(*)    â”‚           â”‚COUNT(*) BY  â”‚           â”‚ORDER BY     â”‚â”‚
        â”‚         â”‚SUM(size_bytes)â”‚          â”‚ bucket_name â”‚           â”‚object_count â”‚â”‚
        â”‚         â”‚COUNT(DISTINCTâ”‚           â”‚             â”‚           â”‚   DESC      â”‚â”‚
        â”‚         â”‚ bucket_name)â”‚           â”‚             â”‚           â”‚ LIMIT 10    â”‚â”‚
        â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
        â”‚                â”‚                          â”‚                          â”‚     â”‚
        â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
        â”‚                                           â–¼                                â”‚
        â”‚                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
        â”‚                                  â”‚   Format    â”‚                           â”‚
        â”‚                                  â”‚  JSON       â”‚                           â”‚
        â”‚                                  â”‚ Response    â”‚                           â”‚
        â”‚                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚{total_objects,â”‚
                          â”‚total_size_bytes,â”‚  
                          â”‚bucket_count,   â”‚
                          â”‚top_buckets[]}  â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **MD5 Checksum Validation (Data Integrity)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  Upload   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   
â”‚     UI      â”‚   File    â”‚   Object    â”‚   MD5     â”‚   Storage   â”‚                   
â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   Service   â”‚Calculate  â”‚   Service   â”‚                   
â”‚Integrity    â”‚           â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚             â”‚                   
â”‚ Test        â”‚           â”‚             â”‚   Hash    â”‚             â”‚                   
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   
                                 â”‚                           â”‚                        
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                MD5 VALIDATION FLOW                â–¼                        â”‚
        â”‚                                                                             â”‚
        â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
        â”‚         â”‚   Upload    â”‚           â”‚   Storage   â”‚           â”‚   Verify    â”‚â”‚
        â”‚         â”‚   Phase     â”‚           â”‚   Phase     â”‚           â”‚  Download   â”‚â”‚
        â”‚         â”‚             â”‚           â”‚             â”‚           â”‚             â”‚â”‚
        â”‚         â”‚Calculate    â”‚           â”‚Store File + â”‚           â”‚Compare MD5  â”‚â”‚
        â”‚         â”‚MD5 Hash     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚Store Hash  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚on Download  â”‚â”‚
        â”‚         â”‚from Content â”‚           â”‚in Metadata â”‚           â”‚             â”‚â”‚
        â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
        â”‚                                          â”‚                          â–²     â”‚
        â”‚                                          â–¼                          â”‚     â”‚
        â”‚                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚     â”‚
        â”‚                                  â”‚  Metadata   â”‚                    â”‚     â”‚
        â”‚                                  â”‚   Service   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
        â”‚                                  â”‚Store ETag   â”‚                          â”‚
        â”‚                                  â”‚= MD5 Hash   â”‚                          â”‚
        â”‚                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚ âœ… MATCH    â”‚
                          â”‚Data Integrityâ”‚
                          â”‚  Verified   â”‚
                          â”‚ âŒ MISMATCH â”‚
                          â”‚   Error     â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Transactional Rollback (Compensating Transactions)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   Upload  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  Storage  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   
â”‚     UI      â”‚  Request  â”‚   Object    â”‚   First   â”‚   Storage   â”‚                   
â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   Service   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   Service   â”‚                   
â”‚ File Upload â”‚           â”‚             â”‚           â”‚             â”‚                   
â”‚             â”‚           â”‚             â”‚           â”‚             â”‚                   
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   
                                 â”‚                           â”‚                        
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚               SAGA PATTERN FLOW                    â–¼                        â”‚
        â”‚                                                                             â”‚
        â”‚                        â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
        â”‚                        â”‚                  â”‚   âœ… File   â”‚                  â”‚
        â”‚                        â”‚                  â”‚   Stored    â”‚                  â”‚
        â”‚                        â”‚                  â”‚Successfully â”‚                  â”‚
        â”‚                        â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
        â”‚                        â”‚                           â”‚                       â”‚
        â”‚                        â–¼            Metadata      â–¼                       â”‚
        â”‚                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     Second   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
        â”‚                 â”‚   Object    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Metadata   â”‚              â”‚
        â”‚                 â”‚   Service   â”‚               â”‚   Service   â”‚              â”‚
        â”‚                 â”‚             â”‚               â”‚             â”‚              â”‚
        â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
        â”‚                        â”‚                           â”‚                       â”‚
        â”‚                        â”‚                           â–¼                       â”‚
        â”‚                        â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
        â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚                  â”‚âŒ FAILURE   â”‚                  â”‚
        â”‚    â”‚   SUCCESS   â”‚     â”‚                  â”‚Service Down â”‚                  â”‚
        â”‚    â”‚   Return    â”‚â—€â”€â”€â”€â”€â”´â”€â”€â”€ âœ… Success    â”‚Connection   â”‚                  â”‚
        â”‚    â”‚  Object ID  â”‚                        â”‚   Error     â”‚                  â”‚
        â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
        â”‚                                                  â”‚                         â”‚
        â”‚                                                  â–¼                         â”‚
        â”‚                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
        â”‚                                          â”‚ğŸ”„ ROLLBACK  â”‚                   â”‚
        â”‚                                          â”‚ Compensate  â”‚                   â”‚
        â”‚                                          â”‚DELETE from  â”‚                   â”‚
        â”‚                                          â”‚ Storage     â”‚                   â”‚
        â”‚                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
        â”‚                                                  â”‚                         â”‚
        â”‚                                                  â–¼                         â”‚
        â”‚                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
        â”‚                                          â”‚âŒ Return    â”‚                   â”‚
        â”‚                                          â”‚503 Service  â”‚                   â”‚
        â”‚                                          â”‚Unavailable  â”‚                   â”‚
        â”‚                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ **KEY DATA FLOW PATTERNS**

### **1. Storage-First Pattern (Upload Operations)**
- **Rationale**: Easier to clean up orphaned files than missing files
- **Flow**: Storage â†’ Metadata â†’ Success OR Rollback Storage
- **Benefit**: Prevents data loss scenarios

### **2. Microservice Communication Patterns**
```
Browser â”€â”€CORSâ”€â”€â–¶ UI Server â”€â”€HTTPâ”€â”€â–¶ Docker Network â”€â”€Internalâ”€â”€â–¶ Services
   â–²                                                                    â”‚
   â”‚                                                                    â–¼
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ JSON/Streaming Response â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Service Responses
```

### **3. Authentication Flow (API Gateway)**
```
Request â”€â”€â–¶ Rate Limit Check â”€â”€â–¶ Auth Validation â”€â”€â–¶ Service Route â”€â”€â–¶ Response
           (429 if exceeded)      (401 if invalid)     (503 if down)     (200/etc)
```

### **4. Data Persistence Strategy**
- **PostgreSQL**: Searchable metadata (buckets + objects)
- **SQLite**: Service-specific indexes (storage + identity)  
- **File System**: Raw object data with UUID partitioning
- **In-Memory**: Rate limiting and temporary state

### **5. Error Handling & Rollback**
- **Compensating Transactions**: Saga pattern for distributed consistency
- **Graceful Degradation**: Services continue operating despite partial failures
- **Cleanup Guarantees**: No orphaned data even with service outages

---

## ğŸ“Š **SUPPORTED UI OPERATIONS SUMMARY**

| Operation | HTTP Method | Primary Service | Secondary Services | Data Flow Complexity |
|-----------|-------------|-----------------|-------------------|---------------------|
| **Create Bucket** | POST | Bucket | API Gateway | Simple |
| **List Buckets** | GET | Bucket | API Gateway | Simple |  
| **Delete Bucket** | DELETE | Bucket | API Gateway | Simple |
| **Upload Object** | PUT | Object | Storage + Metadata | Complex (2-phase) |
| **Download Object** | GET | Object | Storage + Metadata | Medium (2-step) |
| **Delete Object** | DELETE | Object | Storage + Metadata | Medium (dual cleanup) |
| **List Objects** | GET | Object | Metadata | Medium (filtered query) |
| **Health Checks** | GET | All Services | None | Simple (parallel) |
| **Statistics** | GET | Metadata | None | Medium (aggregation) |
| **Rate Limiting** | Middleware | API Gateway | None | Simple (in-memory) |
| **Data Integrity** | Built-in | All Operations | None | Complex (checksums) |
| **Rollback Demo** | Simulation | Object + Storage | Metadata (down) | Complex (saga pattern) |

This comprehensive data flow documentation shows how each UI operation flows through the microservices architecture, demonstrating the sophisticated distributed system design behind your S3-like object storage implementation! ğŸš€

<function_calls>
<invoke name="TodoWrite">
<parameter name="todos">[{"content": "Create data flow diagrams for bucket operations", "status": "completed", "activeForm": "Creating data flow diagrams for bucket operations"}, {"content": "Create data flow diagrams for object operations", "status": "in_progress", "activeForm": "Creating data flow diagrams for object operations"}, {"content": "Create data flow diagrams for administrative operations", "status": "pending", "activeForm": "Creating data flow diagrams for administrative operations"}, {"content": "Create data flow diagrams for health and statistics", "status": "pending", "activeForm": "Creating data flow diagrams for health and statistics"}]