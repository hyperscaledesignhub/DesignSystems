1. What are the different issues that can arise to the system for which we need to define operations in production Kafka?
 1. Under Replicated partitions 
 2. Consumer Lag
 3. Disk space exhaustion
 4. Rebalance Storms
 5. Leader imbalance

2. List operations for each of the issue we have to define in production?
 1. Under replicated Partitions(URP): 
    a)How to know where is the issue?
     Replication is happening in brokers side. Hence this is the issue with broker side
    b)What are the possible issues of broker side?
     1. Either broker is down
     2. There is disk issue with the broker
     3. There is network issue with the broker
    c)Define operations for each of the above issues?
     1. Find the effected broker using kafka admin commands
     2. If Broker is down? Restart it
     3. If disk or network bottleneck do the necessary action
 2. Consumer Lag:
    Operations are
    1. Check Consumer and verify the following
        a. Consumed and  processed metrics are low:
            1. If this is the case, then check any errors in logs
            2. No, errors consumer slowed down. GC pressure or OS issues. restart should help
            3. Consumer mayn't be able to process the data efficiently
            
        b. Compare the input data received across the partition
            1. If this is more that confirms that consumer unable to process more. Either scale it vertically or Check whether we can increase the partitions provided there is no stateful operations are not happening in consumer
3. Disk space exhaustion:
  How this issue is identified?
    Who is writing over disk? Broker is writing over the disk. If the disk is full, broker shuts-down and gets restarted
 What operations has to perform?
   1. If there is sufficient time we can reduce retention time in disk
   2. We can also increase the cloud volume space
   3. We can reassign the partitions such that current brokers high volume partitions can be handled by other brokers which have more space
4. Consumer Rebalance storm:
Why this happens? Because one of the consumer in the group is not responsive for longer duration. Operations can be performed to detect and rectify it in the following way
    1. This is caused by small <session time out> value of each consumer
        a. We can increase this value so that leader broker waits for more time before concluding consumer is timing out
    2. This is caused by <poll interval>  duration of the consumer.
        a. During every poll consumer fetches some records and process. This is a signal to broker that consumer is progressing. Consumer does polling with the frequency given by <poll interval>. Sometimes consumer may be stuck reading more records and it mayn't issue.This is the signal
        to broker that consumer is not active. Hence broker issues rebalancing of consumer, we can increase this value. Or sometimes network issues might cause this problem
    3. Old Kafka versions anytime consumer restarts, rebalance gets triggered. 
        a. Now its removed by defining static membership-ID in the consumer. So that consumer after restarting checks its membership-id and starts reading from its partitions
5. Leader Imbalance:
 1. Some of the brokers takes more partitions than others.It causes creating hot-spot across few brokers
 2. We can detect this by checking number of partitions each broker is taking and there are admin commands to rebalance the partitions. This make sure even distribution of partitions across the brokers

    



        

